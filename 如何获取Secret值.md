# ðŸ”‘ å¦‚ä½•èŽ·å–Server Secretå€¼

## ðŸ“ å®Œæ•´æ­¥éª¤ï¼ˆé™„æˆªå›¾è¯´æ˜Žï¼‰

### æ­¥éª¤1ï¼šè®¿é—®æ™ºæŽ§å°

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://10.73.194.94:8002
```

### æ­¥éª¤2ï¼šç™»å½•è´¦å·

- **å¦‚æžœè¿˜æ²¡æœ‰è´¦å·**ï¼š
  1. ç‚¹å‡»ã€æ³¨å†Œã€‘æŒ‰é’®
  2. å¡«å†™ç”¨æˆ·åå’Œå¯†ç 
  3. å®Œæˆæ³¨å†Œ
  4. **ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·ä¼šè‡ªåŠ¨æˆä¸ºè¶…çº§ç®¡ç†å‘˜**

- **å¦‚æžœå·²æœ‰è´¦å·**ï¼š
  1. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
  2. ç‚¹å‡»ã€ç™»å½•ã€‘

### æ­¥éª¤3ï¼šè¿›å…¥å‚æ•°ç®¡ç†

1. **ç™»å½•æˆåŠŸåŽ**ï¼Œåœ¨é¡µé¢å·¦ä¾§èœå•æ æ‰¾åˆ°ï¼š
   ```
   ðŸ“Š å‚æ•°ç®¡ç†
   ```
   æˆ–è€…è‹±æ–‡ç•Œé¢æ˜¯ï¼š`Params Management`

2. **ç‚¹å‡»è¿›å…¥å‚æ•°ç®¡ç†é¡µé¢**

### æ­¥éª¤4ï¼šæŸ¥æ‰¾server.secret

åœ¨å‚æ•°ç®¡ç†é¡µé¢ä¸­ï¼š

1. **æœç´¢æ¡†**ï¼ˆå¦‚æžœæœ‰ï¼‰ï¼šè¾“å…¥ `server.secret`

2. **æˆ–è€…åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°**ï¼š
   - å‚æ•°åç§°ï¼š`server.secret`
   - å‚æ•°ä»£ç ï¼š`server.secret`
   - å‚æ•°å€¼ï¼šä¸€ä¸²UUIDæ ¼å¼çš„å­—ç¬¦ä¸²

3. **secretå€¼çš„æ ¼å¼**ç±»ä¼¼ï¼š
   ```
   95294d8c-f7b3-44ac-a336-6cf6c4b488a1
   ```
   è¿™æ˜¯ä¸€ä¸ªç”±å­—æ¯ã€æ•°å­—å’ŒçŸ­æ¨ªçº¿ç»„æˆçš„å­—ç¬¦ä¸²

### æ­¥éª¤5ï¼šå¤åˆ¶Secretå€¼

1. **æ‰¾åˆ°server.secretè¿™ä¸€è¡Œ**
2. **ç‚¹å‡»æˆ–é€‰ä¸­å‚æ•°å€¼**
3. **å¤åˆ¶è¿™ä¸ªå€¼**ï¼ˆCtrl+C æˆ–å³é”®å¤åˆ¶ï¼‰
4. **ä¿å­˜åˆ°è®°äº‹æœ¬å¤‡ç”¨**

## ðŸŽ¯ ç•Œé¢ä½ç½®å‚è€ƒ

```
æ™ºæŽ§å°é¦–é¡µ
â”œâ”€â”€ å·¦ä¾§èœå•æ 
â”‚   â”œâ”€â”€ é¦–é¡µ
â”‚   â”œâ”€â”€ å‚æ•°ç®¡ç† â† ç‚¹è¿™é‡Œ
â”‚   â”œâ”€â”€ æ¨¡åž‹é…ç½®
â”‚   â”œâ”€â”€ è®¾å¤‡ç®¡ç†
â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
â”‚   â””â”€â”€ ...
â””â”€â”€ å³ä¾§å†…å®¹åŒº
    â””â”€â”€ å‚æ•°åˆ—è¡¨
        â”œâ”€â”€ server.secret â† æ‰¾è¿™ä¸ª
        â”‚   â””â”€â”€ å€¼ï¼š95294d8c-... â† å¤åˆ¶è¿™ä¸ª
        â”œâ”€â”€ server.public_key
        â””â”€â”€ ...
```

## ðŸ“¸ å¯èƒ½çš„ç•Œé¢æ ·å¼

å‚æ•°ç®¡ç†é¡µé¢é€šå¸¸æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼ŒåŒ…å«ï¼š

| åºå· | å‚æ•°ä»£ç  | å‚æ•°åç§° | å‚æ•°å€¼ | æ“ä½œ |
|------|---------|---------|--------|------|
| 1 | server.secret | æœåŠ¡å™¨å¯†é’¥ | 95294d8c-f7b3-... | ç¼–è¾‘/æŸ¥çœ‹ |
| 2 | server.public_key | å…¬é’¥ | 041efcfae9... | ç¼–è¾‘/æŸ¥çœ‹ |
| ... | ... | ... | ... | ... |

**è¦å¤åˆ¶çš„å°±æ˜¯server.secreté‚£ä¸€è¡Œçš„"å‚æ•°å€¼"åˆ—çš„å†…å®¹ï¼**

## âœ… éªŒè¯Secretæ˜¯å¦æ­£ç¡®

æ­£ç¡®çš„secretå€¼ç‰¹å¾ï¼š
- âœ… æ ¼å¼ï¼šç±»ä¼¼ `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`
- âœ… é•¿åº¦ï¼šé€šå¸¸36ä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬4ä¸ªçŸ­æ¨ªçº¿ï¼‰
- âœ… å­—ç¬¦ï¼šåªåŒ…å«å°å†™å­—æ¯(a-f)ã€æ•°å­—(0-9)å’ŒçŸ­æ¨ªçº¿(-)
- âœ… ç¤ºä¾‹ï¼š`95294d8c-f7b3-44ac-a336-6cf6c4b488a1`

âŒ ä¸æ˜¯secretçš„ä¾‹å­ï¼š
- âŒ `server.secret`ï¼ˆè¿™æ˜¯å‚æ•°åï¼Œä¸æ˜¯å€¼ï¼‰
- âŒ `æœåŠ¡å™¨å¯†é’¥`ï¼ˆè¿™æ˜¯ä¸­æ–‡è¯´æ˜Žï¼‰
- âŒ ç©ºå€¼æˆ–null

## ðŸ” å¦‚æžœæ‰¾ä¸åˆ°server.secret

### å¯èƒ½åŽŸå› 1ï¼šç•Œé¢è¯­è¨€é—®é¢˜

- ä¸­æ–‡ç•Œé¢ï¼šæ‰¾`æœåŠ¡å™¨å¯†é’¥`æˆ–`server.secret`
- è‹±æ–‡ç•Œé¢ï¼šæ‰¾`Server Secret`æˆ–`server.secret`

### å¯èƒ½åŽŸå› 2ï¼šæƒé™ä¸è¶³

- ç¡®ä¿æ‚¨æ˜¯**ç®¡ç†å‘˜è´¦å·**
- ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·è‡ªåŠ¨æ˜¯ç®¡ç†å‘˜
- å¦‚æžœä¸æ˜¯ï¼Œéœ€è¦ç®¡ç†å‘˜æŽˆäºˆæƒé™

### å¯èƒ½åŽŸå› 3ï¼šå‚æ•°æœªåˆå§‹åŒ–

å¦‚æžœçœŸçš„æ‰¾ä¸åˆ°ï¼Œå¯ä»¥ï¼š

1. **åˆ·æ–°é¡µé¢**ï¼ˆF5ï¼‰
2. **é‡æ–°ç™»å½•**
3. **æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„èœå•**ï¼ˆå‚æ•°ç®¡ç† vs æ¨¡åž‹é…ç½®ï¼‰

## ðŸš€ èŽ·å–åˆ°SecretåŽä¸‹ä¸€æ­¥

æ‹¿åˆ°secretå€¼åŽï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

### æ–¹æ³•1ï¼šæ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶

```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano /home/moshu/xiaozhi-esp32-server/main/xiaozhi-server/data/.config.yaml

# ä¿®æ”¹æˆï¼š
manager-api:
  url: http://xiaozhi-esp32-server-web:8003/xiaozhi/
  secret: 95294d8c-f7b3-44ac-a336-6cf6c4b488a1  # æ›¿æ¢ä¸ºä½ çš„secret

# ä¿å­˜ï¼šCtrl+X -> Y -> Enter
```

### æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤ç›´æŽ¥å†™å…¥ï¼ˆæŽ¨èï¼‰

```bash
# æ›¿æ¢ä¸‹é¢çš„YOUR_SECRETä¸ºä½ å¤åˆ¶çš„å€¼
cat > /home/moshu/xiaozhi-esp32-server/main/xiaozhi-server/data/.config.yaml << 'EOF'
manager-api:
  url: http://xiaozhi-esp32-server-web:8003/xiaozhi/
  secret: YOUR_SECRET
EOF
```

### æ–¹æ³•3ï¼šå‘Šè¯‰æˆ‘ï¼Œæˆ‘å¸®ä½ é…ç½®

å¦‚æžœæ‚¨èŽ·å–åˆ°äº†secretå€¼ï¼Œç›´æŽ¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š
1. è‡ªåŠ¨å†™å…¥é…ç½®æ–‡ä»¶
2. é‡å¯æœåŠ¡
3. éªŒè¯è¿žæŽ¥
4. æµ‹è¯•å¯¹è¯åŠŸèƒ½

## ðŸ’¡ å°è´´å£«

1. **Secretå¾ˆé‡è¦**ï¼šä¸è¦æ³„éœ²ç»™å…¶ä»–äºº
2. **æ¯æ¬¡é‡å¯éƒ½ä¼šç”Ÿæˆæ–°çš„**ï¼šå¦‚æžœé‡å¯äº†WebæœåŠ¡ï¼Œsecretå¯èƒ½ä¼šå˜
3. **å¤åˆ¶æ—¶æ³¨æ„ç©ºæ ¼**ï¼šä¸è¦å¤åˆ¶åˆ°å¤šä½™çš„ç©ºæ ¼
4. **ä¿å­˜å¤‡ä»½**ï¼šå»ºè®®ä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹

## ðŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æžœæ‚¨ï¼š
- âœ… èƒ½ç™»å½•æ™ºæŽ§å°ï¼Œä½†æ‰¾ä¸åˆ°å‚æ•°ç®¡ç†èœå•
- âœ… æ‰¾åˆ°äº†å‚æ•°ç®¡ç†ï¼Œä½†çœ‹ä¸åˆ°server.secret
- âœ… ä¸ç¡®å®šå¤åˆ¶çš„å€¼æ˜¯å¦æ­£ç¡®
- âœ… æˆ–è€…æœ‰å…¶ä»–é—®é¢˜

è¯·å‘Šè¯‰æˆ‘å…·ä½“æƒ…å†µï¼Œæˆ‘ä¼šå¸®æ‚¨è§£å†³ï¼

---

**å¿«æ·é“¾æŽ¥**ï¼š
- æ™ºæŽ§å°ï¼šhttp://10.73.194.94:8002
- Webå¯¹è¯é¡µé¢ï¼šhttp://10.73.194.94:8006/test_page.html

**ç›¸å…³æ–‡æ¡£**ï¼š
- `/home/moshu/xiaozhi-esp32-server/å¿«é€Ÿå¯åŠ¨Webå¯¹è¯.md`
- `/home/moshu/xiaozhi-esp32-server/Webå¯¹è¯é¡µé¢ä½¿ç”¨æŒ‡å—.md`


